# =====================================================
# TikTok Recording Worker Configuration
# =====================================================

# Worker Identification
WORKER_ID=auto_generated
WORKER_HOSTNAME=auto_detected
WORKER_MAX_CONCURRENT_JOBS=5

# Redis Configuration (for bot communication)
REDIS_URL=redis://localhost:6379/0
REDIS_CONNECT_TIMEOUT_SECONDS=5
REDIS_SOCKET_TIMEOUT_SECONDS=10
REDIS_MAX_CONNECTIONS=10

# Database Configuration
DATABASE_URL=postgresql://user:password@localhost:5432/tiktok_recorder
DB_CONNECTION_TIMEOUT_SECONDS=30
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20

# Recording Configuration
OUTPUT_DIRECTORY=/recordings
ENABLE_ORGANIZED_FOLDERS=true
MAX_FILE_SIZE_GB=1.5
SIZE_CHECK_INTERVAL_SECONDS=30
BUFFER_SIZE_KB=512
FRAGMENTATION_SAFETY_MARGIN_PERCENT=5

# HTTP & Proxy Configuration
ENABLE_PROXY=true
HTTP_REQUEST_TIMEOUT_SECONDS=8
HTTP_CONNECT_TIMEOUT_SECONDS=5
MAX_RETRIES=10
RETRY_BACKOFF_FACTOR=0.5

# FFmpeg Configuration
FFMPEG_LOGLEVEL=error
FFMPEG_TIMEOUT_SECONDS=20

# Performance Optimization
ENABLE_FFPROBE_VERIFICATION=false
FFPROBE_VERIFICATION_MODE=disabled

# Real-time Video Sampling
ENABLE_REALTIME_SAMPLING=true
SAMPLING_INTERVAL_SECONDS=30
SAMPLING_DURATION_SECONDS=5
SAMPLING_ANALYSIS_THREADS=2

# Corruption Detection
ENABLE_TIMESTAMP_FRAME_DETECTION=true
FRAME_REPETITION_THRESHOLD=1
ENABLE_CORRUPTED_SEGMENT_DETECTION=true
CORRUPTION_DETECTION_INTERVAL_SECONDS=60

# Resource Monitoring
ENABLE_RESOURCE_MONITORING=true
RESOURCE_CHECK_INTERVAL_SECONDS=30
CPU_WARNING_THRESHOLD_PERCENT=80
MEMORY_WARNING_THRESHOLD_PERCENT=80
DISK_WARNING_THRESHOLD_PERCENT=90

# Logging Configuration
LOG_LEVEL=INFO
ENABLE_FILE_LOGGING=true

# Work Queue System
WORKER_HEARTBEAT_INTERVAL_SECONDS=30
JOB_CLEANUP_INTERVAL_HOURS=6

# Error Handling
ENABLE_FALLBACK_API=true
FALLBACK_ON_PROTOCOL_ERROR=false
SKIP_CACHE_ON_CONNECTION_ERROR=true

# Room ID Cache
ENABLE_ROOM_ID_CACHE=true

# Post-recording Validation
POST_RECORDING_VALIDATION_MINUTES=3